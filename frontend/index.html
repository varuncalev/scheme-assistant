<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>SchemeSahayak ‚Äî Find Your Government Benefits</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600;700&family=Geist+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    :root {
      --white:       #ffffff;
      --gray-50:     #f9fafb;
      --gray-100:    #f3f4f6;
      --gray-200:    #e5e7eb;
      --gray-300:    #d1d5db;
      --gray-400:    #9ca3af;
      --gray-500:    #6b7280;
      --gray-600:    #4b5563;
      --gray-700:    #374151;
      --gray-900:    #111827;
      --blue-50:     #eff6ff;
      --blue-500:    #3b82f6;
      --blue-600:    #2563eb;
      --green-500:   #22c55e;
      --shadow-xs:   0 1px 2px rgba(0,0,0,.05);
      --shadow-sm:   0 1px 3px rgba(0,0,0,.08),0 1px 2px rgba(0,0,0,.04);
      --shadow-md:   0 4px 6px -1px rgba(0,0,0,.07),0 2px 4px -1px rgba(0,0,0,.04);
      --r-xs: 6px; --r-sm: 8px; --r-md: 12px; --r-lg: 16px;
      --font: 'Geist', -apple-system, BlinkMacSystemFont, sans-serif;
      --mono: 'Geist Mono', monospace;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; }
    body { font-family: var(--font); background: var(--white); color: var(--gray-900); font-size: 14px; line-height: 1.5; -webkit-font-smoothing: antialiased; }
    button { font-family: var(--font); cursor: pointer; border: none; background: none; }
    textarea { font-family: var(--font); }

    .shell { display: grid; grid-template-columns: 268px 1fr; height: 100vh; }

    /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
    .sidebar {
      background: var(--gray-50);
      border-right: 1px solid var(--gray-200);
      display: flex; flex-direction: column;
      overflow: hidden;
    }
    .brand {
      padding: 18px 16px 16px;
      border-bottom: 1px solid var(--gray-200);
      display: flex; align-items: center; gap: 10px;
    }
    .brand-mark {
      width: 30px; height: 30px;
      background: var(--gray-900);
      border-radius: var(--r-sm);
      display: flex; align-items: center; justify-content: center;
      font-size: 15px; flex-shrink: 0;
    }
    .brand-name { font-size: 14px; font-weight: 600; letter-spacing: -0.2px; }
    .brand-pill {
      margin-left: auto;
      font-size: 10px; font-weight: 500;
      background: var(--blue-50); color: var(--blue-600);
      border: 1px solid #bfdbfe;
      padding: 2px 7px; border-radius: 20px;
    }
    .nav-section { padding: 14px 8px 4px; }
    .nav-label {
      font-size: 10.5px; font-weight: 500;
      color: var(--gray-400); letter-spacing: 0.6px;
      text-transform: uppercase; padding: 0 8px; margin-bottom: 3px;
    }
    .nav-btn {
      width: 100%; display: flex; align-items: center; gap: 8px;
      padding: 7px 10px; border-radius: var(--r-sm);
      font-size: 13px; color: var(--gray-600);
      transition: background 0.12s, color 0.12s; text-align: left;
    }
    .nav-btn:hover { background: var(--gray-200); color: var(--gray-900); }
    .nav-btn .ni { font-size: 14px; width: 18px; text-align: center; flex-shrink: 0; }

    .stats-row {
      display: grid; grid-template-columns: 1fr 1fr;
      gap: 8px; padding: 12px 8px;
    }
    .stat {
      background: var(--white); border: 1px solid var(--gray-200);
      border-radius: var(--r-md); padding: 14px;
      box-shadow: var(--shadow-xs);
    }
    .stat .v { font-size: 22px; font-weight: 700; letter-spacing: -0.5px; line-height: 1; }
    .stat .k { font-size: 11px; color: var(--gray-400); margin-top: 4px; }

    .sb-footer {
      margin-top: auto;
      padding: 10px 8px;
      border-top: 1px solid var(--gray-200);
    }
    .sb-row {
      display: flex; align-items: center; gap: 8px;
      padding: 7px 10px; border-radius: var(--r-sm);
      font-size: 12px; color: var(--gray-500);
      transition: background 0.12s;
    }
    .sb-row:hover { background: var(--gray-200); cursor: pointer; }
    .online-dot {
      width: 6px; height: 6px; background: var(--green-500);
      border-radius: 50%; flex-shrink: 0;
      animation: blink 2.5s ease-in-out infinite;
    }
    @keyframes blink { 0%,100%{opacity:1} 50%{opacity:.35} }

    /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
    .main { display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

    .topbar {
      height: 55px; padding: 0 24px;
      border-bottom: 1px solid var(--gray-200);
      display: flex; align-items: center; justify-content: space-between;
      flex-shrink: 0;
    }
    .topbar-l { display: flex; align-items: center; gap: 10px; }
    .hamburger {
      display: none; width: 30px; height: 30px;
      align-items: center; justify-content: center;
      border-radius: var(--r-xs); color: var(--gray-500); font-size: 17px;
      transition: background 0.12s;
    }
    .hamburger:hover { background: var(--gray-100); }
    .topbar-title { font-size: 14px; font-weight: 500; }
    .topbar-r { display: flex; gap: 6px; }
    .tb-btn {
      height: 30px; padding: 0 12px;
      border-radius: var(--r-xs); font-size: 12.5px; font-weight: 500;
      color: var(--gray-600); border: 1px solid var(--gray-200);
      background: var(--white); box-shadow: var(--shadow-xs);
      display: flex; align-items: center; gap: 5px;
      transition: all 0.12s;
    }
    .tb-btn:hover { background: var(--gray-50); border-color: var(--gray-300); color: var(--gray-900); }

    .chips {
      padding: 9px 24px; border-bottom: 1px solid var(--gray-200);
      display: flex; gap: 6px; overflow-x: auto; scrollbar-width: none; flex-shrink: 0;
    }
    .chips::-webkit-scrollbar { display: none; }
    .chip {
      display: inline-flex; align-items: center; gap: 5px;
      padding: 5px 11px; border-radius: 20px; font-size: 12px; font-weight: 400;
      color: var(--gray-600); border: 1px solid var(--gray-200);
      background: var(--white); white-space: nowrap;
      transition: all 0.12s; flex-shrink: 0; box-shadow: var(--shadow-xs);
    }
    .chip:hover { background: var(--gray-900); color: var(--white); border-color: var(--gray-900); }

    /* messages */
    .messages {
      flex: 1; overflow-y: auto; padding: 32px 28px;
      display: flex; flex-direction: column; gap: 0;
      scrollbar-width: thin; scrollbar-color: var(--gray-200) transparent;
    }
    .messages::-webkit-scrollbar { width: 4px; }
    .messages::-webkit-scrollbar-thumb { background: var(--gray-200); border-radius: 4px; }

    /* welcome */
    .welcome {
      display: flex; flex-direction: column; align-items: flex-start;
      justify-content: center; flex: 1; max-width: 580px;
      padding-bottom: 40px; gap: 20px;
    }
    .w-eyebrow {
      font-size: 11.5px; font-weight: 500; color: var(--gray-400);
      letter-spacing: 0.5px; text-transform: uppercase;
    }
    .welcome h1 {
      font-size: clamp(26px, 3.5vw, 38px);
      font-weight: 700; letter-spacing: -0.8px; line-height: 1.15; color: var(--gray-900);
    }
    .welcome h1 em { font-style: normal; color: var(--blue-600); }
    .welcome-sub { font-size: 15px; color: var(--gray-500); line-height: 1.75; max-width: 460px; }
    .wgrid { display: grid; grid-template-columns: repeat(2,1fr); gap: 10px; width: 100%; max-width: 500px; }
    .wcard {
      padding: 16px; border: 1px solid var(--gray-200);
      border-radius: var(--r-md); cursor: pointer;
      transition: all 0.15s; background: var(--white); box-shadow: var(--shadow-xs);
    }
    .wcard:hover { border-color: var(--gray-900); box-shadow: var(--shadow-md); transform: translateY(-1px); }
    .wcard-icon { font-size: 18px; margin-bottom: 8px; }
    .wcard-title { font-size: 13px; font-weight: 500; margin-bottom: 3px; }
    .wcard-sub { font-size: 11.5px; color: var(--gray-400); }

    /* message rows */
    .mrow {
      display: flex; gap: 12px;
      padding: 14px 0; border-bottom: 1px solid var(--gray-100);
      animation: pop .2s ease-out;
    }
    .mrow:last-of-type { border-bottom: none; }
    @keyframes pop { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none} }
    .mrow.user { flex-direction: row-reverse; }

    .mavatar {
      width: 28px; height: 28px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 12px; flex-shrink: 0; margin-top: 2px;
    }
    .mrow.user .mavatar {
      background: var(--gray-900); color: var(--white);
      font-size: 9px; font-weight: 600; font-family: var(--mono);
    }
    .mrow.bot .mavatar { background: var(--blue-50); border: 1px solid #bfdbfe; }

    .mbody { display: flex; flex-direction: column; gap: 4px; max-width: 70%; }
    .mrow.user .mbody { align-items: flex-end; }
    .mmeta { display: flex; align-items: center; gap: 8px; font-size: 11px; color: var(--gray-400); }
    .mname { font-weight: 500; color: var(--gray-500); }

    .mbubble {
      padding: 11px 15px; border-radius: var(--r-md);
      font-size: 14px; line-height: 1.75; word-break: break-word;
    }
    .mrow.user .mbubble {
      background: var(--gray-900); color: var(--white);
      border-bottom-right-radius: 4px;
    }
    .mrow.bot .mbubble {
      background: var(--gray-50); border: 1px solid var(--gray-200);
      color: var(--gray-700); border-bottom-left-radius: 4px;
    }
    .mbubble strong { color: var(--gray-900); font-weight: 600; }
    .mrow.user .mbubble strong { color: var(--white); }
    .mbubble a { color: var(--blue-600); text-decoration: underline; text-decoration-color: #bfdbfe; text-underline-offset: 2px; }

    /* typing */
    .trow { display: none; align-items: center; gap: 12px; padding: 14px 0; }
    .tbubble {
      background: var(--gray-50); border: 1px solid var(--gray-200);
      padding: 12px 15px; border-radius: var(--r-md);
      border-bottom-left-radius: 4px;
      display: flex; gap: 4px; align-items: center;
    }
    .tbubble span {
      width: 6px; height: 6px; background: var(--gray-300);
      border-radius: 50%; animation: tdot 1.4s ease-in-out infinite;
    }
    .tbubble span:nth-child(2){animation-delay:.2s}
    .tbubble span:nth-child(3){animation-delay:.4s}
    @keyframes tdot{0%,60%,100%{background:var(--gray-300);transform:scale(1)} 30%{background:var(--blue-500);transform:scale(1.25)}}

    /* input */
    .izone {
      padding: 14px 24px 18px;
      border-top: 1px solid var(--gray-200);
      background: var(--white); flex-shrink: 0;
    }
    .iframe {
      display: flex; align-items: flex-end; gap: 8px;
      border: 1.5px solid var(--gray-200); border-radius: var(--r-md);
      padding: 9px 9px 9px 15px; background: var(--white);
      box-shadow: var(--shadow-xs); transition: border-color .15s, box-shadow .15s;
    }
    .iframe:focus-within {
      border-color: var(--gray-900);
      box-shadow: 0 0 0 3px rgba(17,24,39,.06);
    }
    #userInput {
      flex: 1; border: none; outline: none;
      font-size: 14px; color: var(--gray-900); background: transparent;
      resize: none; max-height: 120px; line-height: 1.6; padding: 2px 0;
    }
    #userInput::placeholder { color: var(--gray-400); }
    .sbtn {
      width: 32px; height: 32px; background: var(--gray-900);
      border-radius: var(--r-xs);
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0; transition: all .15s; box-shadow: var(--shadow-xs);
    }
    .sbtn:hover:not(:disabled) { background: var(--gray-700); }
    .sbtn:disabled { opacity: .3; cursor: not-allowed; }
    .sbtn svg { width: 14px; height: 14px; fill: white; }
    .ihint {
      margin-top: 7px; font-size: 11px; color: var(--gray-400);
      display: flex; align-items: center; gap: 14px;
    }
    .kbd {
      font-family: var(--mono); font-size: 9.5px;
      background: var(--gray-100); border: 1px solid var(--gray-200);
      border-radius: 3px; padding: 1px 5px; color: var(--gray-500);
    }

    /* overlay */
    .overlay {
      display: none; position: fixed; inset: 0;
      background: rgba(0,0,0,.25); z-index: 100;
      backdrop-filter: blur(2px);
    }
    .overlay.show { display: block; }

    /* responsive */
    @media (max-width: 860px) {
      .shell { grid-template-columns: 1fr; }
      .sidebar {
        position: fixed; left: -280px; top: 0; bottom: 0;
        width: 268px; z-index: 200;
        transition: left .25s cubic-bezier(.4,0,.2,1);
        box-shadow: 0 20px 50px rgba(0,0,0,.15);
      }
      .sidebar.open { left: 0; }
      .hamburger { display: flex; }
      .messages { padding: 20px 16px; }
      .topbar, .chips, .izone { padding-left: 16px; padding-right: 16px; }
      .mbody { max-width: 86%; }
      .wgrid { max-width: 100%; }
    }
    @media (max-width: 500px) {
      .wgrid { grid-template-columns: 1fr; }
      .welcome h1 { font-size: 24px; }
      .welcome-sub { font-size: 14px; }
    }
  </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="closeSidebar()"></div>

<div class="shell">

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="brand">
      <div class="brand-mark">üáÆüá≥</div>
      <span class="brand-name">SchemeSahayak</span>
      <span class="brand-pill">AI</span>
    </div>

    <div class="nav-section">
      <div class="nav-label">Categories</div>
      <button class="nav-btn" onclick="quickAsk('What schemes are available for farmers?')"><span class="ni">üåæ</span>Farming Schemes</button>
      <button class="nav-btn" onclick="quickAsk('Business loan schemes for entrepreneurs')"><span class="ni">üíº</span>Business Loans</button>
      <button class="nav-btn" onclick="quickAsk('Health insurance schemes for family')"><span class="ni">üè•</span>Healthcare</button>
      <button class="nav-btn" onclick="quickAsk('Education scholarships available in India')"><span class="ni">üìö</span>Education</button>
      <button class="nav-btn" onclick="quickAsk('Housing schemes for poor families')"><span class="ni">üè†</span>Housing</button>
      <button class="nav-btn" onclick="quickAsk('Employment guarantee schemes in India')"><span class="ni">üí™</span>Employment</button>
      <button class="nav-btn" onclick="quickAsk('Pension schemes for unorganised sector')"><span class="ni">üßì</span>Pension</button>
    </div>

    <div class="stats-row">
      <div class="stat"><div class="v">15+</div><div class="k">Schemes</div></div>
      <div class="stat"><div class="v">‚Çπ0</div><div class="k">Cost to use</div></div>
    </div>

    <div class="sb-footer">
      <div class="sb-row" style="cursor:default;">
        <div class="online-dot"></div>
        AI model is online
      </div>
      <div class="sb-row" onclick="window.open('http://localhost:8000/docs','_blank')">
        <span>üìÑ</span> API Documentation
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">
    <div class="topbar">
      <div class="topbar-l">
        <button class="hamburger" onclick="toggleSidebar()">‚ò∞</button>
        <span class="topbar-title">AI Assistant</span>
      </div>
      <div class="topbar-r">
        <button class="tb-btn" onclick="clearChat()">‚Ü∫ Clear chat</button>
      </div>
    </div>

    <div class="chips">
      <div class="chip" onclick="quickAsk('I am a small farmer')">üåæ Farmer</div>
      <div class="chip" onclick="quickAsk('SC/ST entrepreneur looking for startup loans')">üíº SC/ST Business</div>
      <div class="chip" onclick="quickAsk('Scheme for girl child education')">üëß Girl Education</div>
      <div class="chip" onclick="quickAsk('Need health insurance for my family')">üè• Health Cover</div>
      <div class="chip" onclick="quickAsk('I need guaranteed employment near my village')">üí™ Employment</div>
      <div class="chip" onclick="quickAsk('Affordable housing scheme for my family')">üè† Housing</div>
      <div class="chip" onclick="quickAsk('Startup India benefits and support')">üöÄ Startups</div>
    </div>

    <div class="messages" id="messages">
      <div class="welcome" id="welcome">
        <div class="w-eyebrow">Government Scheme Assistant ¬∑ India</div>
        <h1>Find benefits<br/>you <em>actually qualify</em> for</h1>
        <p class="welcome-sub">Tell me your situation and I'll instantly match you with relevant government schemes ‚Äî agriculture, health, business, education, housing, and more.</p>
        <div class="wgrid">
          <div class="wcard" onclick="quickAsk('What schemes can help me start a small business?')">
            <div class="wcard-icon">üíº</div>
            <div class="wcard-title">Start a Business</div>
            <div class="wcard-sub">MUDRA, Stand Up India‚Ä¶</div>
          </div>
          <div class="wcard" onclick="quickAsk('I am a farmer and need financial assistance')">
            <div class="wcard-icon">üåæ</div>
            <div class="wcard-title">Farming Support</div>
            <div class="wcard-sub">PM-KISAN, Fasal Bima‚Ä¶</div>
          </div>
          <div class="wcard" onclick="quickAsk('Health insurance for my entire family')">
            <div class="wcard-icon">üè•</div>
            <div class="wcard-title">Family Healthcare</div>
            <div class="wcard-sub">Ayushman Bharat‚Ä¶</div>
          </div>
          <div class="wcard" onclick="quickAsk('Scholarship and savings scheme for my daughter')">
            <div class="wcard-icon">üìö</div>
            <div class="wcard-title">Education & Savings</div>
            <div class="wcard-sub">NSP, Sukanya Samriddhi‚Ä¶</div>
          </div>
        </div>
      </div>

      <div class="trow" id="typing">
        <div class="mavatar" style="background:var(--blue-50);border:1px solid #bfdbfe;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;">ü§ñ</div>
        <div class="tbubble"><span></span><span></span><span></span></div>
      </div>
    </div>

    <div class="izone">
      <div class="iframe">
        <textarea id="userInput" rows="1" placeholder="Ask about any government scheme or benefit‚Ä¶" onkeydown="handleKey(event)" oninput="grow(this)"></textarea>
        <button class="sbtn" id="sendBtn" onclick="send()">
          <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
        </button>
      </div>
      <div class="ihint">
        <span><kbd class="kbd">‚Üµ</kbd> to send</span>
        <span><kbd class="kbd">‚áß</kbd> + <kbd class="kbd">‚Üµ</kbd> new line</span>
      </div>
    </div>
  </main>
</div>

<script>
  const API = window.location.hostname === 'localhost' ? 'http://localhost:8000/chat' : '/chat';
  const $m = document.getElementById('messages');
  const $i = document.getElementById('userInput');
  const $b = document.getElementById('sendBtn');
  const $t = document.getElementById('typing');
  const $w = document.getElementById('welcome');

  function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('open');
    document.getElementById('overlay').classList.toggle('show');
  }
  function closeSidebar() {
    document.getElementById('sidebar').classList.remove('open');
    document.getElementById('overlay').classList.remove('show');
  }
  function grow(el) { el.style.height = 'auto'; el.style.height = Math.min(el.scrollHeight, 120) + 'px'; }
  function handleKey(e) { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); send(); } }
  function quickAsk(q) { $i.value = q; grow($i); closeSidebar(); send(); }
  function clearChat() { document.querySelectorAll('.mrow').forEach(r => r.remove()); $w.style.display = 'flex'; $i.focus(); }
  function ts() { return new Date().toLocaleTimeString('en-IN', { hour:'2-digit', minute:'2-digit' }); }
  function fmt(t) {
    return t
      .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
      .replace(/\n/g, '<br>')
      .replace(/(https?:\/\/[^\s<]+)/g, '<a href="$1" target="_blank" rel="noopener">$1</a>');
  }

  function addMsg(text, who) {
    $w.style.display = 'none';
    const row = document.createElement('div');
    row.className = `mrow ${who}`;
    row.innerHTML = `
      <div class="mavatar">${who === 'user' ? 'YOU' : 'ü§ñ'}</div>
      <div class="mbody">
        <div class="mmeta"><span class="mname">${who === 'user' ? 'You' : 'SchemeSahayak'}</span><span>${ts()}</span></div>
        <div class="mbubble">${fmt(text)}</div>
      </div>`;
    $m.insertBefore(row, $t);
    $m.scrollTop = $m.scrollHeight;
  }

  async function send() {
    const txt = $i.value.trim();
    if (!txt) return;
    addMsg(txt, 'user');
    $i.value = ''; $i.style.height = 'auto';
    $b.disabled = true; $t.style.display = 'flex';
    $m.scrollTop = $m.scrollHeight;
    try {
      const r = await fetch(API, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ message: txt }) });
      const d = await r.json();
      $t.style.display = 'none';
      addMsg(d.response, 'bot');
    } catch {
      $t.style.display = 'none';
      addMsg('‚ö†Ô∏è Could not reach the server. Make sure the API is running on http://localhost:8000', 'bot');
    } finally {
      $b.disabled = false; $i.focus();
    }
  }

  window.addEventListener('load', () => $i.focus());
</script>
</body>
</html>